export NERSC_HOST=`/usr/common/usg/bin/nersc_host`
# Ted's desiconda
module use /global/common/$NERSC_HOST/contrib/desi/modulefiles
module load desiconda/20170613-1.1.4-imaging
# DR5 
module use /global/cscratch1/sd/desiproc/modulefiles
module load legacypipe/legacysurvey
module load legacypipe/unwise_coadds
module load legacypipe/unwise_coadds_timeresolved
module load legacypipe/dust

#if [ "$NERSC_HOST" == "edison" ]; then
#    # legacy survey
#    module use /global/common/edison/contrib/hpcosmo/hpcports_gnu-9.0/env/modulefiles
#    module use ${CODE_DIR}/legacypipe/bin/modulefiles/${NERSC_HOST}
#    module load legacysurvey/dr4-edison-scratch
#    module load dust/scratch
#elif [ "$NERSC_HOST" == "cori" ]; then
#    # legacy survey
#    module use /global/common/cori/contrib/hpcosmo/hpcports_gnu-default/env/modulefiles
#    module use ${CODE_DIR}/legacypipe/bin/modulefiles/${NERSC_HOST}
#    module load legacysurvey/dr4-cori-scratch
#    module load dust/cori-scratch
#fi


#export LEGACY_SURVEY_DIR=/global/cscratch1/sd/desiproc/dr4/legacypipe-dir/../dr4_fixes/legacypipe-dir
#export UNWISE_COADDS_DIR=/global/cscratch1/sd/desiproc/dr4/unwise-coadds/fulldepth:/global/cscratch1/sd/desiproc/dr4/unwise-coadds/w3w4
#export UNWISE_COADDS_TIMERESOLVED_DIR=/global/cscratch1/sd/desiproc/dr4/unwise-coadds/time_resolved_neo2
#export UNWISE_COADDS_TIMERESOLVED_INDEX=/global/cscratch1/sd/desiproc/dr4/unwise-coadds/time_resolved_neo2/time_resolved_neo2-atlas.fits


# Qdo 
export QDO_BACKEND=postgres
export QDO_DB_NAME=desirun
export QDO_DB_HOST=scidb2.nersc.gov
export QDO_DB_USER=desirun_admin
# Old one
# export QDO_DB1_NAME=desi
# export QDO_DB1_HOST=scidb2.nersc.gov
# export QDO_DB1_USER=desi_user
alias ql='qdo list'
alias q='sqs -u; qdo list'

# Slurm
alias qs='qstat.serial -u desiproc; qdo list'
alias ql='qdo list'
alias qb='qdo status bricks'
alias q='sqs -u; qdo list'
alias qq='qstat.serial -u desiproc; qdo list'
